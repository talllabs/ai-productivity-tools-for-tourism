<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tools for Tourism Professionals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tool-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .upvote-btn.upvoted {
            background-color: #2563eb; /* A darker blue */
            color: white;
            cursor: not-allowed;
        }
        .upvote-btn.upvoted svg {
            fill: white;
        }
        .save-btn svg {
            transition: fill 0.2s, stroke 0.2s;
        }
        .save-btn.saved svg {
            fill: #ef4444;
            stroke: #ef4444;
        }
        .category-link.active {
            background-color: #eef2ff;
            color: #3b82f6;
            font-weight: 600;
        }
        details > summary {
            list-style: none;
            cursor: pointer;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        summary::after {
            content: "▶";
            float: right;
            transform: rotate(0);
            transition: transform 0.2s;
        }
        details[open] > summary::after {
           transform: rotate(90deg);
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .feature-tag-clickable {
            cursor: pointer;
            transition: background-color 0.2s;
        }
    </style>
</head>
<body>
    <header class="bg-gray-100 p-4 flex justify-between items-center">
        <div class="text-xl font-semibold">AI Pro Tools | Tourism</div>
        <nav class="flex items-center space-x-4">
            <button id="login-btn" class="text-gray-700">Login</button>
            <button id="signup-btn" class="px-4 py-2 bg-blue-600 text-white rounded">Sign Up</button>
            <div id="account-menu" class="hidden text-gray-700"></div>
            <button id="signout-btn" class="hidden text-red-600">Sign Out</button>
        </nav>
    </header>

    <section class="bg-blue-600 text-white text-center py-16">
        <h1 class="text-4xl font-bold mb-4">AI Productivity Tools for Tourism</h1>
        <p class="mb-8">What challenge are you trying to solve? Describe it below.</p>
        <div class="flex justify-center space-x-2">
            <input id="search-input" type="text" placeholder="e.g., Create personalized itinerary" class="px-4 py-2 w-1/3 rounded">
            <button id="search-btn" class="px-6 py-2 bg-white text-blue-600 rounded">Search</button>
        </div>
    </section>

    <main class="p-8">
        <div class="mb-4"><a href="#" class="text-blue-600">&larr; Back to all tools</a></div>
        <div id="filter-section" class="grid grid-cols-3 gap-4 mb-8">
            <div>
                <h3 class="font-semibold mb-2">Features</h3>
                <ul id="features-filter-list" class="space-y-1"></ul>
            </div>
            <div>
                <h3 class="font-semibold mb-2">Pricing</h3>
                <ul id="pricing-filter-list" class="space-y-1"></ul>
            </div>
            <div>
                <h3 class="font-semibold mb-2">Best For</h3>
                <ul id="bestfor-filter-list" class="space-y-1"></ul>
            </div>
        </div>

        <div id="grid-container" class="grid grid-cols-3 gap-6"></div>
    </main>

    <!-- Login Modal -->
    <div id="login-modal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 modal-overlay">
        <div class="bg-white rounded-lg p-6 w-96">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold">Login</h2>
                <button onclick="closeModal(loginModal)">&times;</button>
            </div>
            <form id="login-form" class="space-y-4">
                <input type="email" placeholder="Email" class="w-full px-3 py-2 border rounded">
                <input type="password" placeholder="Password" class="w-full px-3 py-2 border rounded">
                <div class="text-right"><button type="button" onclick="openModal(resetModal)" class="text-blue-600">Forgot Password?</button></div>
                <div id="login-error" class="text-red-600 hidden"></div>
                <button type="submit" class="w-full px-4 py-2 bg-blue-600 text-white rounded">Login</button>
            </form>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signup-modal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 modal-overlay">
        <div class="bg-white rounded-lg p-6 w-96">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold">Sign Up</h2>
                <button onclick="closeModal(signupModal)">&times;</button>
            </div>
            <form id="signup-form" class="space-y-4">
                <input type="email" placeholder="Email" class="w-full px-3 py-2 border rounded">
                <input type="password" placeholder="Password" class="w-full px-3 py-2 border rounded">
                <div id="signup-error" class="text-red-600 hidden"></n                <button type="submit" class="w-full px-4 py-2 bg-blue-600 text-white rounded">Sign Up</button>
            </form>
        </div>
    </div>

    <!-- Reset Modal -->
    <div id="reset-modal" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 modal-overlay">
        <div class="bg-white rounded-lg p-6 w-96">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-semibold">Reset Password</h2>
                <button onclick="closeModal(resetModal)">&times;</button>
            </div>
            <form id="reset-form" class="space-y-4">
                <input type="email" placeholder="Email" class="w-full px-3 py-2 border rounded">
                <button type="submit" class="w-full px-4 py-2 bg-blue-600 text-white rounded">Send Reset Email</button>
            </form>
        </div>
    </div>

    <!-- Firebase & App Logic -->
    <script type="module">
  // ---- Firebase imports with persistence ----
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
  import {
    getAuth,
    setPersistence,
    browserLocalPersistence,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    signOut,
    onAuthStateChanged,
    sendPasswordResetEmail
  } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
  import {
    getFirestore,
    doc,
    getDoc,
    setDoc,
    updateDoc,
    arrayUnion,
    arrayRemove
  } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

  // ---- Your Firebase config ----
  const firebaseConfig = {
    apiKey: "AIzaSyDglW5m7u8IFBmeIZTLp8IwxBu5cbvC2s4",
    authDomain: "ai-tools-for-tourism.firebaseapp.com",
    projectId: "ai-tools-for-tourism",
    storageBucket: "ai-tools-for-tourism.firebasestorage.app",
    messagingSenderId: "426723838356",
    appId: "1:426723838356:web:e21c62549ee1e91b16e781",
    measurementId: "G-6Y6FHBS5ZT"
  };

  // ---- Initialize ----
  const app  = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db   = getFirestore(app);

  // ---- In-memory user state ----
  let currentUser      = null;
  let pendingSaveToolId = null;  // if someone clicks “save” before log-in

  // ---- Modal & form bindings ----
  const loginBtn      = document.getElementById("login-btn");
  const signupBtn     = document.getElementById("signup-btn");
  const accountMenu   = document.getElementById("account-menu");
  const loginModal    = document.getElementById("login-modal");
  const signupModal   = document.getElementById("signup-modal");
  const loginForm     = document.getElementById("login-form");
  const signupForm    = document.getElementById("signup-form");
  const loginError    = document.getElementById("login-error");
  const signupError   = document.getElementById("signup-error");
  const resetForm     = document.getElementById("reset-form");
  const signOutBtn    = document.getElementById("signout-btn");

  // ---- Modal helpers ----
  function openModal(modal) {
    modal.classList.remove("hidden");
  }
  function closeModal(modal) {
    modal.classList.add("hidden");
  }

  // ---- Auth-UI updater ----
  function updateAuthUI(user) {
    if (user) {
      loginBtn.classList.add("hidden");
      signupBtn.classList.add("hidden");
      accountMenu.textContent = user.email;
      accountMenu.classList.remove("hidden");
      closeModal(loginModal);
      closeModal(signupModal);
    } else {
      loginBtn.classList.remove("hidden");
      signupBtn.classList.remove("hidden");
      accountMenu.classList.add("hidden");
    }
  }

  // ---- Sign-up ----
  signupForm.addEventListener("submit", async e => {
    e.preventDefault();
    signupError.classList.add("hidden");
    const email    = e.target.elements[0].value;
    const password = e.target.elements[1].value;
    try {
      await setPersistence(auth, browserLocalPersistence);
      await createUserWithEmailAndPassword(auth, email, password);
      closeModal(signupModal);
      signupForm.reset();
    } catch (err) {
      signupError.textContent = err.message;
      signupError.classList.remove("hidden");
    }
  });

  // ---- Login ----
  loginForm.addEventListener("submit", async e => {
    e.preventDefault();
    loginError.classList.add("hidden");
    const email    = e.target.elements[0].value;
    const password = e.target.elements[1].value;
    try {
      await setPersistence(auth, browserLocalPersistence);
      await signInWithEmailAndPassword(auth, email, password);
      loginForm.reset();
    } catch
